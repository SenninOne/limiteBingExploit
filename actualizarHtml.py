from bs4 import BeautifulSoup

texto = input("Ingresa la conversacion: ")

mensajes = texto.split(" ")
gamaMensajes = []
bingyMensajes = []

for i in range(len(mensajes)):
    if mensajes[i] == "Gama:":
        mensaje_gama = ""
        for j in range(i+1, len(mensajes)):
            if mensajes[j].endswith(":"):
                break
            mensaje_gama += mensajes[j] + " "
        gamaMensajes.append(mensaje_gama.strip())
    elif mensajes[i] == "Bingy:":
        mensaje_bingy = ""
        for j in range(i+1, len(mensajes)):
            if mensajes[j].endswith(":"):
                break
            mensaje_bingy += mensajes[j] + " "
        bingyMensajes.append(mensaje_bingy.strip())

#Generar una lista con los mensages de ambos
mensajesIntercalados = []

for mensajeGama, mensajeBingy in zip(gamaMensajes, bingyMensajes):
    mensajesIntercalados.append(mensajeGama)
    mensajesIntercalados.append(mensajeBingy)

#print("Lista con mensajes intercalados",mensajesIntercalados)

# Cargar el archivo HTML
with open("conversacion.html", encoding="utf-8") as f:
    soup = BeautifulSoup(f, "html.parser")

# Modificar el contenido de la conversación
conversacion = soup.find("ol")

#Añadir los mensajes nuevos a la lista
for indice, elemento in enumerate(mensajesIntercalados):
    if indice % 2 == 0:
        #print(elemento)
        conversacion.append(soup.new_tag("li"))
        conversacion.find_all("li")[-1].append(soup.new_tag("strong"))
        conversacion.find_all("strong")[-1].append("Gama: ")
        conversacion.find_all("li")[-1].append(elemento)
    else:
        #print(elemento)
        conversacion.append(soup.new_tag("li"))
        conversacion.find_all("li")[-1].append(soup.new_tag("strong"))
        conversacion.find_all("strong")[-1].append("Bingy: ")
        conversacion.find_all("li")[-1].append(elemento)

# Guardar el archivo HTML actualizado
with open("conversacion.html", "w", encoding="utf-8") as f:
    f.write(str(soup))
